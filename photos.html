<!doctype html>
<html class="no-js" lang="">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>DIVVYfans Photos</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link rel="icon" type="image/png" href="icon.ico">
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/main.css">
    <script src="js/vendor/modernizr-2.8.3.min.js"></script>
    <link href='https://fonts.googleapis.com/css?family=Roboto:400,300,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="http://cdn.leafletjs.com/leaflet-0.5/leaflet.css">
</head>
<body>
    <main role="main">
        <nav>
            <div class="nav-container">
                <div class="nav-div logo">
                    <a href="index.html"><img src="img/logo.svg" alt="divvy logo"></a>
                </div> <!-- /.brand -->
                <div class="nav-div">
                    <a href="#"><p><i class="fa fa-book"></i> stories</p></a>
                </div> <!-- /.stories -->
                <div class="nav-div">
                    <a class="active" href="photos.html"><p><i class="fa fa-picture-o"></i> photos</p></a>
                </div> <!-- /.photos -->
                <div class="nav-div">
                    <a href="videos.html"><p><i class="fa fa-video-camera"></i> videos</p></a>
                </div> <!-- /.videos -->
                <div class="nav-div">
                    <a href="#"><p><i class="fa fa-users"></i> about</p></a>
                </div> <!-- /.about -->
                <div class="nav-div fun">
                    <a href="#"><p><i class="fa fa-bicycle"></i> fun</p></a>
                </div> <!-- /.fun -->
                <div class="clear"></div>
            </div> <!-- /.nav-container -->
        </nav>

        <section class="photos-content">
            <div class="container photo-container">
            <div class="mapWelcome">
                <h1>Hello and welcome to divvy fans website!</h1>
            </div>
                <div class="mapWrap">
                    <div id="map" style="width: 600px; height: 400px"></div><br/>
                    <input id="prefer_bikes" type="radio" name="prefer" value="bikes" onClick="updateToggles(this);"/>
                    <label for="prefer_bikes">Only show stations with available bikes</label><br/>
                    <input id="prefer_docks" type="radio" name="prefer" value="docks" onClick="updateToggles(this);"/>
                    <label for="prefer_docks">Only show stations with available docks</label><br/>
                    <input id="prefer_all" type="radio" name="prefer" value="all" onClick="updateToggles(this);" checked/>
                    <label for="prefer_all">Show all stations</label>
                </div> <!-- /.mapWrap -->
                <div class="mapText">
                    <p>Hello and Welcome to the world-wide divvy bike fan website.  This site is ran by a guy who is a lot like you. I love to bike, explore the city, drink craft beer and enjoy life.</p>
                    <p>I am currenly studying web development at GA in Chicago, with big dreams in persuing my passion for computer science and living life to the fullest.</p>
                    <p>Please take a look at the map to the left to find the closest divvy bike. Click anywhere on the map to display the five nearest stations to that spot, along with information for bike availability.</p>
                    <br>
                    <img src="http://bramble-staging.s3-website-us-east-1.amazonaws.com/humphd/198/bike.png" alt="pixel bike">
                </div>
            </div> <!-- /.photo-container -->
        </div><!-- .container -->
    </section> <!-- /.content -->

</main>
<!--     <div class="push"></div> -->
<!--     <footer class="footer">
        <p>&copy; SHEFFcode 2015. All rights reserved.</p>
    </footer> -->

    <!-- Scripts -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.11.2.min.js"><\/script>')</script>
    <script src="js/plugins.js"></script>
    <script src="js/main.js"></script>
    <!-- Instagram -->
    <script type="text/javascript" src="js/vendor/insta.js"></script>
    <script src="http://cdn.leafletjs.com/leaflet-0.5/leaflet.js"></script>
    <script>

      //   var instaObj = []; 
      //   jQuery(function($) {
      //     $('.instagram').on('willLoadInstagram', function(event, options) {
      //       console.log(options);
      //   });
      //     $('.instagram').on('didLoadInstagram', function(event, response) {
      //       console.log(response);

      //       return response.data;
      //       for ( var obj in response.data){
      //           $('.instagram').append('<div class="image-div"><img src="' + response.data[obj].images.low_resolution.url + ' "></div>');
      //       }       
      //   });
      //   self.instaObj.push(function(){
      //                 $('.instagram').on('didLoadInstagram', function(event, response) {
      //       console.log(response);
      //       return response.data;  

      //   });

      //   });
      //     $('.instagram').instagram({
      //       hash: 'divvy',
      //       clientId: '1d60092324264d1681671e08f58b8936'
      //   });
      // });
      //   console.log(instaObj); 

        //Divvy

            var prefer = null;
            var map = L.map('map').setView([41.8826, -87.6506], 13);
            L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                maxZoom: 18,
                attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>'
            }).addTo(map);
            var geojsonLayer = new L.GeoJSON([], {
                onEachFeature: function (feature, layer) {
                    layer.bindPopup("<h4>"+feature.properties.stationName+"</h4><p>" + feature.properties.availableBikes + " bikes, " + feature.properties.availableDocks + " docks available.</p>");
                }
            });
            function updateToggles(radio) {
                if (radio.value === "all") {
                    prefer = null;
                } else {
                    prefer = radio.value;
                }
            }
            function onMapClick(e) {
                console.log("You clicked the map at " + e.latlng.toString());
                var xhrequest = new XMLHttpRequest();
                var url= "http://shrouded-beach-2183.herokuapp.com/stations/nearby?lat="+e.latlng.lat+"&lon="+e.latlng.lng;
                if (prefer) {
                    url += "&prefer="+prefer;
                }
                xhrequest.onreadystatechange = function() {
                    if (xhrequest.readyState == 4) {
                        if (xhrequest.status == 200) {
                            geojsonLayer.clearLayers();
                            var layerItems =  JSON.parse(xhrequest.responseText);
                            geojsonLayer.addData(layerItems);
                            map.addLayer(geojsonLayer);
                        }
                    }
                };
                xhrequest.open('GET', url, true);
                xhrequest.send(null);
            }
            map.on('click', onMapClick);
        </script>
        
    </script>

    <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
    <script>
        (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
            function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
        e=o.createElement(i);r=o.getElementsByTagName(i)[0];
        e.src='http://www.google-analytics.com/analytics.js';
        r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
        ga('create','UA-XXXXX-X','auto');ga('send','pageview');
    </script>
</body>
</html>
